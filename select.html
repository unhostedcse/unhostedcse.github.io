
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html lang="en-US">
 <head>
      <link href="ui/screen.css" rel="stylesheet" type="text/css" />
      <link href="ui/webkit.css" rel="stylesheet" type="text/css" />  
      <link type="image/x-icon" href="graphics/favicon.ico" rel="shortcut icon" />    
      <title>Horde :: Log in</title>
 </head>

 <body class="modal-form">
<div class="modal-form">



<form name="horde_login" id="horde_login" method="post" action="http://unhosted.projects.uom.lk/horde/login.php">
 <input type="hidden" name="app" id="app" value="" />
 <input type="hidden" name="login_post" id="login_post" value="0" />
 <input type="hidden" name="url" value="" />
 <input type="hidden" name="anchor_string" id="anchor_string" value="" />



<div id="horde-login-pass-capslock" style="display:none">
 Warning: Your Caps Lock key is on!</div>
<div id="horde_select_view_div" style="display:none">
 <div><label for="horde_select_view">Mode</label></div>
 <div>
  <select id="horde_select_view" name="horde_select_view">
   <option value="auto">Automatic</option>
   <option value="" disabled="disabled">- - - - - - - - - -</option>
   <option value="basic">Basic</option>
   <option value="dynamic">Dynamic</option>
   <option value="smartmobile">Mobile (Smartphone/Tablet)</option>
   <option value="mobile">Mobile (Minimal)</option>
   <option value="mobile_nojs" selected="selected">Mobile (No JavaScript)</option>
  </select>
 </div>
</div>


<div><label for="mail_accounts">Select Account</label></div>
<div><select id="mail_accounts" name="mail_accounts">
        <!-- <option value="gmail">Gmail</option>
        <option value="yahoomail">Yahoomail</option>
        <option value="hotmail"> Hotmail</option> -->
        
</select>
</div>


<div>
 <input id="login-button" name="login_button" class="horde-default submit-button" value="Log in" type='button'/>
 <input id="manage-button" name="manage_button" class="horde-default submit-button" value="Manage Accounts" type='button'/>
 <!-- <button type="button" onclick="redirect();">View Account</button> -->
</div>



</form>
</div>

<br />
<table width="100%">
  <tr>
    <!-- <td align="center"><img src="graphics/horde-power1.png" alt="Powered by Horde" /></td> -->
  </tr>
</table>

  
  
   </body>

   <script type="text/javascript" src="DBController.js"></script>
   <script type="text/javascript"  src="ui/jquery-2.1.1.js"></script>
</html>

<script>
var username="";
var db=new DBController();
db.create_open_account_DB(load);

function load(){    
  db.getAccounts(show);
}

function show(msgs){
  var msg;
  for (var i = 0; msg=msgs[i],i < msgs.length; i++) {
    $("#mail_accounts").append('<option value="'+msg.id+'">'+msg.username+'</option>');
  };  
}

$(document).on("click",'#login-button',redirect);
$(document).on("click",'#manage-button',manageAccounts);

function manageAccounts(){
  location.href="./account.html";
}

function redirect() {
    var id=document.getElementById('mail_accounts').value;
    var url='./index.html?uid='+parseInt(id)+'&pid='+0;
    location.href=url;
    console.log(url);
    // var uid=getParameterByName('uid');
    // console.log(uid);
}

function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),results = regex.exec(location.href);
    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

</script>